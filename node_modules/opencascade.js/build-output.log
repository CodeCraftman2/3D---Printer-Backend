Sending build context to Docker daemon  697.9kB
Step 1/40 : FROM emscripten/emsdk:2.0.22
2.0.22: Pulling from emscripten/emsdk
345e3491a907: Already exists
57671312ef6f: Already exists
5e9250ddb7d0: Already exists
4073170a4f7e: Already exists
0d7ff5996c2d: Already exists
bf892354bc0e: Already exists
c548c15edede: Already exists
Digest: sha256:c9bf032e314652edfe09982c319b43386116597188add1b074a7e3d150312cce
Status: Downloaded newer image for emscripten/emsdk:2.0.22
 ---> 34754516fc94
Step 2/40 : RUN apt update -y
 ---> Using cache
 ---> 350de3cdcef7
Step 3/40 : RUN apt install -y build-essential python3 python3-pip git cmake bash curl npm
 ---> Using cache
 ---> 9aa5b67bb6e9
Step 4/40 : WORKDIR /python/
 ---> Using cache
 ---> 7550eaab289f
Step 5/40 : RUN   apt install -y     build-essential     zlib1g-dev     libncurses5-dev     libgdbm-dev     libnss3-dev     libssl-dev     libsqlite3-dev     libreadline-dev     libffi-dev     curl     libbz2-dev     python3-setuptools
 ---> Using cache
 ---> 4f63757410d8
Step 6/40 : WORKDIR /clang/
 ---> Using cache
 ---> 1482edc61be0
Step 7/40 : RUN curl -SL https://github.com/llvm/llvm-project/releases/download/llvmorg-11.0.0/clang+llvm-11.0.0-x86_64-linux-gnu-ubuntu-20.04.tar.xz  | tar -xJC . &&  mv clang+llvm-11.0.0-x86_64-linux-gnu-ubuntu-20.04 clang_11 &&  PATH=/clang/clang_11/bin:$PATH &&  LD_LIBRARY_PATH=/clang/clang_11/lib:$LD_LIBRARY_PATH
 ---> Using cache
 ---> 5a97dfe89174
Step 8/40 : RUN PATH=/clang/clang_11/lib:$PATH
 ---> Using cache
 ---> dde9c7c8bb9e
Step 9/40 : RUN LD_LIBRARY_PATH=/clang/clang_11/lib:$LD_LIBRARY_PATHLD_LIBRARY_PATH
 ---> Using cache
 ---> 95121312f0d7
Step 10/40 : RUN   cd clang_11/lib &&   ln -s libclang.so.11 libclang-11.so
 ---> Using cache
 ---> 3e03209bc17f
Step 11/40 : RUN apt install -y libncurses5 libncurses6 libncurses5-dev libncursesw5-dev
 ---> Using cache
 ---> a13014902514
Step 12/40 : RUN apt install -y git autoconf gperf libtool gettext autopoint pkg-config
 ---> Using cache
 ---> ea2d64dbb13e
Step 13/40 : WORKDIR /freetype/
 ---> Using cache
 ---> 3d32fb796297
Step 14/40 : RUN   git clone https://git.savannah.nongnu.org/git/freetype/freetype2.git .
 ---> Using cache
 ---> 5203bc64636b
Step 15/40 : WORKDIR /expat/
 ---> Using cache
 ---> 81add609c35b
Step 16/40 : RUN   git clone https://github.com/libexpat/libexpat.git . &&   git checkout R_2_2_10
 ---> Using cache
 ---> c57a903d68c1
Step 17/40 : WORKDIR /expat/expat/
 ---> Using cache
 ---> 07ddd5566891
Step 18/40 : RUN   ./buildconf.sh &&   emconfigure ./configure --enable-static=yes --enable-shared=no &&   emmake make
 ---> Using cache
 ---> 33a8dc860906
Step 19/40 : WORKDIR /fontconfig/
 ---> Using cache
 ---> e4b8049e166c
Step 20/40 : RUN   git clone https://gitlab.freedesktop.org/fontconfig/fontconfig.git .
 ---> Using cache
 ---> 7541db3ba989
Step 21/40 : RUN   CFLAGS="-D__linux__ -I/freetype/include" LDFLAGS="-s USE_FREETYPE=1" FREETYPE_CFLAGS=" " FREETYPE_LIBS=" " emconfigure ./autogen.sh --with-expat-includes=/expat/expat/lib/ --with-expat-lib=/expat/expat/lib/.libs/ --enable-static=yes --enable-shared=no &&   emmake make
 ---> Using cache
 ---> bccb450451bd
Step 22/40 : RUN   apt install -y gnupg &&   curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - &&   echo "deb https://dl.yarnpkg.com/debian/ stable main" | tee /etc/apt/sources.list.d/yarn.list &&   apt update && apt install -y yarn
 ---> Using cache
 ---> 6f962c6aa324
Step 23/40 : WORKDIR /rapidjson/
 ---> Using cache
 ---> cba66f8eef75
Step 24/40 : RUN   git clone https://github.com/Tencent/rapidjson.git .
 ---> Using cache
 ---> 6a39344cf24c
Step 25/40 : ENV OCCT_COMMIT_HASH_FULL 0dc2c377fc5a2d8cf065f4ec005e356240cb484c
 ---> Using cache
 ---> e97c8ee3c459
Step 26/40 : ENV OCCT_COMMIT_HASH 0dc2c37
 ---> Using cache
 ---> 751479030a8a
Step 27/40 : WORKDIR /occt/
 ---> Using cache
 ---> 6f5704863288
Step 28/40 : RUN   curl "https://git.dev.opencascade.org/gitweb/?p=occt.git;a=snapshot;h=${OCCT_COMMIT_HASH_FULL};sf=tgz" -o occt.tar.gz &&   tar -xvf occt.tar.gz
 ---> Using cache
 ---> e64c5e9e8960
Step 29/40 : RUN   curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | bash &&   apt-get install git-lfs &&   git lfs install
 ---> Using cache
 ---> 33e0a7f0d828
Step 30/40 : RUN   apt update -y &&   apt install build-essential -y &&   pip3 install clang
 ---> Using cache
 ---> 2bc72f1b8496
Step 31/40 : RUN   apt update -y &&   DEBIAN_FRONTEND=noninteractive apt upgrade -y &&   pip3 install pyyaml patch
 ---> Using cache
 ---> 43025b7256b8
Step 32/40 : RUN   apt install -y bison flex
 ---> Using cache
 ---> 01138dfb8dc2
Step 33/40 : RUN   mkdir /opencascade.js/ &&   mkdir /opencascade.js/build/ &&   mkdir /opencascade.js/dist/
 ---> Using cache
 ---> 343fe7007c63
Step 34/40 : WORKDIR /opencascade.js/
 ---> Using cache
 ---> 2b50f19bd426
Step 35/40 : COPY src_build src_build
 ---> Using cache
 ---> e798098c3953
Step 36/40 : RUN   /opencascade.js/src_build/applyPatches.py &&   /opencascade.js/src_build/compile.py
 ---> Using cache
 ---> 6187c6849d17
Step 37/40 : COPY . .
 ---> f950f868be2d
Step 38/40 : RUN chmod -R 777 .
 ---> Running in 502b24ef6aa2
Removing intermediate container 502b24ef6aa2
 ---> b3963ad60d45
Step 39/40 : WORKDIR /src/
 ---> Running in fd9d31e8c5ad
Removing intermediate container fd9d31e8c5ad
 ---> c711c62622f6
Step 40/40 : ENTRYPOINT [ "/opencascade.js/src/run.sh" ]
 ---> Running in 1c21b7f5028d
Removing intermediate container 1c21b7f5028d
 ---> 12a2d49a496f
Successfully built 12a2d49a496f
Successfully tagged my_awesome_image:latest
